<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/register.css" />
		<link rel="stylesheet" type="text/css" href="fonts/iconfont.css" />
	</head>

	<body>
		<div class="header">
			<div class="header-con">
				<img src="img/CggUF1mgDUCAHcWmAAAaPIY0xT4626.png" style="padding-top: 45px;float: left;" />
				<ul style="margin-left: 480px;">
					<li>
						<a href="#"><img src="img/1.png" /></a>
					</li>
					<li>
						<a href="#"><img src="img/2.png" /></a>
					</li>
					<li>
						<a href="#"><img src="img/4.png" /></a>
					</li>
				</ul>
			</div>
		</div>

		<!--
        	作者：offline
        	时间：2019-06-24
        	描述:register部分
        -->
		<div class="login">
			<div class="con-login">
				<div class="login-left">
					<img src="img/CggUF1rBoeSAL_cFAADtEkIoWlw665=673x558.jpg" />
				</div>
				<div class="login-right">
					<div class="login-t">
						<span id="" style="margin-left: 15px;">注册华盛奥莱会员</span>
						<span id="" style="float: right;margin-right: 15px;"><a href="login.html" style="color: #FF7800;">已有账户，登录<a></span>
					</div>
					<div class="regis-msg">
						<ul>
							<li>注册账号</li>
							<li><input type="text" class="regis-phone" placeholder="请输入手机号" /></li>
							<span id="reg1"></span>
						</ul>
						<ul>
							<li>输入密码</li>
							<li><input type="password" class="regis-psw" placeholder="请输入密码" /></li>
							<span id="reg2"></span>
						</ul>
						<ul>
							<li>确认密码</li>
							<li><input type="password" class="regis-qrps" placeholder="请输入密码" /></li>
							<span id="reg3"></span>
						</ul>
						<ul style="position: relative;">
							<li>验证码</li>
							<li><input type="text" class="regis-yzm" placeholder="请输验证码" style="width: 130px;" /></li>
							<p style="background:#FCFCFC;width:80px;height: 30px;position: absolute;left:200px;top: 5px;font-size: 18px;" id="res"></p>
							<span id="reg4" style="margin-left: 80px;"></span>
						</ul>
						<ul style="position: relative;">
							<li>短信验证</li>
							<li><input type="text" class="regis-qryzm" placeholder="请输入验证码" style="width: 130px;" /></li>
							<p style="background:#E6E6E6;width:80px;height: 30px;position: absolute;left:200px;top: 5px;font-size: 12px;line-height: 30px;text-align: center;" id="cli-p">获取验证码</p>
							<span id="reg5"></span>

						</ul>
						<div class="zhuce-a">
							<a href="#" style="color: #FFFFFF;font-size: 14px;font-weight: bold;">注册</a>
						</div>

						<div id="xieyi" style="float:right;margin-right: 5px;color: #a7a7a7;
							margin-top: 7px;">
							<input type="checkbox" id="J_mobile_agree" checked="checked" />《奥莱购会员协议》
						</div>
					</div>

				</div>
			</div>
		</div>

		<!--
    	作者：offline
    	时间：2019-06-24
    	描述：footer
    -->
		<div id="footer">
			<div class="hp-copy">
				<ul>
					<li>
						<a href="http://help.aolaigo.com/64.htm" target="_blank">关于奥莱购</a>
					</li>
					<li>|</li>
					<li>
						<a href="http://help.aolaigo.com/68.htm" target="_blank">联系我们</a>
					</li>
					<li>|</li>
					<li>
						<a href="http://help.aolaigo.com/66.htm" target="_blank">诚聘英才</a>
					</li>
					<li>|</li>
					<li>
						<a href="http://help.aolaigo.com/65.htm" target="_blank">商务合作</a>
					</li>
					<li>|</li>
					<li>
						<a href="http://help.aolaigo.com/links.htm" target="_blank">友情链接</a>
					</li>
					<li>|</li>
					<li>
						<a href="http://www.csc86.com/" target="_blank">华南城网</a>
					</li>
					<li>|</li>
					<li>
						<a href="http://help.aolaigo.com/75.htm" target="_blank">华盛Outlets</a>
					</li>
				</ul>
			</div>
			<div class="hp-copyright">
				Copyright © 2013-2016 深圳华盛电子商务有限公司 粤ICP备16081451-1号 All Right <br><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;深圳市龙岗区平湖华南城1号交易广场4楼奥莱购（深圳华盛电子商务有限公司）<br><br>
				<a target="_blank" href="#" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;">
					<img src="http://cms.aolaigo.com/Images/gabat.png" style="float:left;margin-left: 105px;" />
					<p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#666;">粤公网安备 44030702000487号</p>
				</a>
			</div>
			<div class="authentication" style="width:750px;margin:auto">
				<img src="img/TA@`0T}DL7]F8H3J$6$$8FT.png" />
			</div>
		</div>

		<script src="data/js/jquery-1.11.0.js" type="text/javascript" charset="utf-8"></script>
		<script src="data/js/register.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			var uname = document.getElementsByClassName("regis-phone")[0];
			var pass = document.getElementsByClassName("regis-psw")[0];
			var regisYzm = document.getElementsByClassName("regis-yzm")[0]
			var regisQrps = document.getElementsByClassName("regis-qrps")[0];
			var regisQryzm = document.getElementsByClassName("regis-qryzm")[0];
			var flag = 1;
			var phone = /^1([38]\d|5[0-35-9]|7[3678])\d{8}$/;
			var zzmima = /^[a-zA-Z_]\w{5,19}$/;

			//手机号正则验证
			uname.onchange = function() {
					var reg1 = document.getElementById("reg1");
					var val = this.value;
					if(phone.test(val)) {
						flag = 1;
						reg1.innerHTML = "";
					} else {
						reg1.innerHTML = "请输入正确的手机号";
						flag = 0
					}
				}
				//密码正则验证
			pass.onchange = function() {
					var reg2 = document.getElementById("reg2");
					var val = this.value;
					if(zzmima.test(val)) {
						flag = 1;
						reg2.innerHTML = "";
					} else {
						reg2.innerHTML = "请输入6-20位字符";
						flag = 0;
					}
				}
				//确认密码正则验证
			regisQrps.onchange = function() {
				var reg3 = document.getElementById("reg3");
				var val = this.value;
				//				console.log(regisPsw.value);
				//				console.log(this.value)
				if(pass.value = this.value) {
					flag = 1;
					reg3.innerHTML = "";
				} else {
					reg3.innerHTML = "两次输入密码不一致";
					flag = 0
				}
			}

			/* 图片验证码验证*/
			var Res = document.getElementById("res");
			var arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
			var ar = 'az'
			var res = '';
			for(i = ar.charCodeAt(0); i <= ar.charCodeAt(1); i++) {
				var s = String.fromCharCode(i)
				var d = s.toUpperCase()
				arr.push(s)
				arr.push(d)
			}
			for(j = 0; j < 4; j++) {
				var n = parseInt(Math.random() * arr.length)
				res += arr[n]
			}
			Res.innerHTML = res;
			regisYzm.onchange = function() {
				var val = this.value;
				if(val == res) {
					flag = 1;
					reg4.innerHTML = "";
				} else {
					flag = 0;
					reg4.innerHTML = "请输入图片验证码";
				}
			}

			/*手机验证码验证*/
			var mgsDx = "";
			var arr1 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
			var cliP = document.getElementById("cli-p");
			for(j = 0; j < 6; j++) {
				var n = parseInt(Math.random() * arr1.length)
				mgsDx += arr[n];
			}
			cliP.onclick = function() {
				alert(mgsDx);
			};
			regisQryzm.onchange = function() {
				var val = this.value;
				console.log(val);
				console.log(mgsDx)
				if(mgsDx == val) {
					flag = 1;
					reg5.innerHTML = "";
				} else {
					flag = 0;
					reg5.innerHTML = "请输入4到6位的验证码";
				}
			}

			var zhuce = document.getElementsByClassName("zhuce-a")[0];
			zhuce.onclick = function() {
				if(flag == 1) {
					$.post("http://47.104.244.134:8080/usersave.do", {
						username: uname.value,
						password: pass.value,
						email: "wj_" + uname.value + "@qq.com",
						sex: "0"

					}).done(function(data) {
						console.log(data);
						if(data.code == 0) {
							alert("注册成功");
							console.log(data.code)
							location.href = "login.html"
						} else if(data.code==1){
							alert("用户名或邮箱重复");
						}
					})

				}
			}
		</script>

	</body>

</html>